<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS高级</title>
</head>
<body>
<h1>JS高级</h1>
<ul>
    <li>变量提升与函数提升</li>
    <li>执行上下文</li>
</ul>

</body>

<script type="text/javascript">
    window.onload = function () {
        console.log('============================变量函数提升开始===================================');
        functionVarUP();
        console.log('============================变量函数提升结束===================================');

        console.log('============================执行上下文开始===================================');
        runContext();

        console.log('============================执行上下文结束===================================');



    };

    function runContext(){
        /**
         * 1. 代码分类(位置)
         *   * 全局代码
         *   * 函数(局部)代码
         * 2. 全局执行上下文
         *   * 在执行全局代码前将window确定为全局执行上下文
         *   * 对全局数据进行预处理
         *     * var定义的全局变量==>undefined, 添加为window的属性
         *     * function声明的全局函数==>赋值(fun), 添加为window的方法
         *     * this==>赋值(window)
         *   * 开始执行全局代码
         * 3. 函数执行上下文
         *   * 在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象(虚拟的, 存在于栈中)
         *   * 对局部数据进行预处理
         *     * 形参变量==>赋值(实参)==>添加为执行上下文的属性
         *     * arguments==>赋值(实参列表), 添加为执行上下文的属性
         *     * var定义的局部变量==>undefined, 添加为执行上下文的属性
         *     * function声明的函数 ==>赋值(fun), 添加为执行上下文的方法
         *     * this==>赋值(调用函数的对象)
         *   * 开始执行函数体代码
         */
    }
    //变量函数提升开始
    function functionVarUP() {
        /**
         * 1. 变量声明提升
         *   * 通过var定义(声明)的变量, 在定义语句之前就可以访问到
         *   * 值: undefined
         * 2. 函数声明提升
         *   * 通过function声明的函数, 在之前就可以直接调用
         *   * 值: 函数定义(对象)
         * 3. 问题: 变量提升和函数提升是如何产生的?
         */

        console.log("变量提升")
        console.log("定义在下面的var变量,会先执行赋值到window值为undefined: ", a)
        console.log("function声明的函数,在定义前面可以使用,优先执行了 值: ", aa)
        var a = 2;

        function aa() {
            var c = 2;
            console.log("aa函数")
        }

        if (a) {
            var b = 0;
        }
        console.log("var声明的变量属于全局,在大括号外也能使用: ", b)
        // console.log("如果要局部使用, 可以放方法中不对外暴露: ",c)
    }

</script>

</html>
