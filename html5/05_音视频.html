<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>音视频</title>
    <style>

        a {
            text-decoration: none;
            display: block;
            color: black;
        }
        .nav{
            list-style: none;
            width: 608px;
            height: 38px;
            border: 1px solid;
            padding: 0;
            overflow: hidden;
        }
        .nav > li{
            float: left;
            height: 100%;
            width: 100px;
            text-align: center;
            line-height: 38px;
        }

        .nav > li:not(:last-child){
            border-right: 1px solid;
        }


        .nav > li >.down{
            height: 100px;
            background: yellow;
            transition: .5s;
        }

        ul>li:hover .down{
            transform: translateY(-38px);
        }

    </style>
</head>
<body>
<h1>音视频</h1>
<video src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/test.mp4" width="500" height="500" controls></video>
<audio src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/test.mp3" controls></audio>

<h1>兼容性写法</h1>
<video controls width="300" height="300">
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.mp4" type="video/mp4">
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.ogv" type="video/ogg">
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.webm" type="video/webm">
    当前浏览器不支持 video直接播放, 点击下载视频 <a href="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.mp4">下载视频</a>
</video>

<audio controls>
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.mp3" type="audio/mpeg">
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.aac" type='audio/aac; codecs="aac"'>
    <source src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.ogg" type='audio/ogg; codecs="vorbis"'>
    当前浏览器不支持 音频直接播放, 点击下载音频 <a href="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.mp3">下载视频</a>
</audio>
<audio controls src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/OUTPUT.ogg" ></audio>


<h1>属性设置</h1>
自动播放和循环播放 <br/><br/>
<audio  id="pro_audio" controls src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/test.mp3" autoplay loop ></audio>


<h1>property</h1>
<video id="pro_video" src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/test.mp4" width="500" height="500" controls></video>


<h1>音阶导航</h1>
<div id="yjwrap">
<!--    ul li 导航-->
    <audio class="nav-audio"></audio>
    <ul class="nav">
        <li data-flag="a">
<!--            <div class="down">00</div>-->
            <a href="javacript:;">我的主页</a>
            <div class="down">00</div>
        </li>
        <li data-flag="b">
            <a href="javacript:;">新闻头条</a>
            <div class="down"></div>
        </li>
        <li data-flag="c">
            <a href="javacript:;">电视剧</a>
            <div class="down"></div>
        </li>

        <li data-flag="d">
            <a href="javacript:;">最新电影</a>
            <div class="down"></div>
        </li>
        <li data-flag="e">
            <a href="javacript:;">小说大全</a>
            <div class="down"></div>
        </li>
        <li data-flag="f">
            <a href="javacript:;">今日团购</a>
            <div class="down"></div>
        </li>
    </ul>


    <h1>与canvas结合</h1>
    <video id="canvas_video" src="https://zhuhaibus.oss-cn-shenzhen.aliyuncs.com/2021-03/test.mp4" width="0" height="0" controls></video>
    <canvas id="video_canvas" width="500" height="300"></canvas>


</div>

</body>

<script type="application/javascript">
    window.onload = function (){
        let video = document.querySelector("#pro_video");
        let audio = document.querySelector("#pro_audio");

        video.play();

        //视频加载完, 输出视频时长
        video.addEventListener("loadeddata",function (){
            console.log(video.duration);
        })

        setInterval(function (){
            console.log(video.currentTime);
            console.log(audio.currentTime);
        },1000)

        //音量控制, muted 和 volume之间不会同步, muted(静音)优先级高.
        video.muted = true;
        audio.muted = true;

        console.log(video.muted);
        console.log(video.volume);

        console.log(video.paused);
        console.log(audio.paused);
        console.log(audio.ended);
        console.log(audio.error);
        console.log(audio.currentSrc);

        video.poster = "img/yuyi.png";
        console.log(video.poster);
        console.log(video.width);
        console.log(video.height);

        video.addEventListener("loadeddata",function (){
            console.log(video.videoWidth);
            console.log(video.videoHeight);
        })


        setTimeout(function (){
            video.pause();
            audio.pause();
        },5000)

        video.src = "xxx";
        video.load();


        let liNodes = document.querySelectorAll(".nav>li");
        let audioNav = document.querySelector(".nav-audio");

        for (let i = 0; i < liNodes.length; i++) {
            liNodes[i].addEventListener("mouseenter",function (){
                let flag = this.getAttribute("data-flag");
                audioNav.src = "http://s8.qhimg.com/share/audio/piano1/" + flag + "4.mp3";
                audioNav.play();
            })
        }



        const canvasVideo = document.querySelector("#canvas_video");
        const canvasBase = document.querySelector("#video_canvas");

        if (!canvasBase.getContext) return;
        const context = canvasBase.getContext("2d");

        canvasVideo.addEventListener("loadeddata",function (){
            setInterval(function () {
                context.drawImage(canvasVideo,0,0, canvasBase.width, canvasBase.height);
            });

            canvasVideo.play();
        })



    }



</script>

</html>

















